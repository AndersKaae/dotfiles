general {
  lock_cmd = hyprlock
  before_sleep_cmd = hyprlock
  ignore_dbus_inhibit = false
  ignore_systemd_inhibit = false
}

# Idle timeout (screen off after 5 min)
listener {
  timeout = 300
  on-timeout = hyprctl dispatch dpms off
  on-resume = hyprctl dispatch dpms on
}

# Lid handling
listener {
  event = lid
  on-open = hyprctl dispatch dpms on
  on-close = bash -c '
    if [ $(hyprctl monitors | grep -c "Monitor") -eq 1 ]; then
      systemctl suspend
    else
      hyprctl dispatch dpms off
    fi
  '
}
